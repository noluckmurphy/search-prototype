<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Tips States Test</title>
    <link rel="stylesheet" href="assets/main.css">
</head>
<body>
    <div id="app">
        <header class="header">
            <div class="header__brand">
                <h1>Search Prototype</h1>
            </div>
        </header>
        
        <main class="app-main">
            <section class="screen screen--results">
                <div class="results-view">
                    <header class="results-view__header">
                        <div>
                            <h1>Search Results</h1>
                            <p class="results-view__summary" id="results-summary">Test different states</p>
                        </div>
                    </header>
                    
                    <div class="results-view__main">
                        <aside class="results-view__facets" id="facets-container">
                            <!-- Facet pro tips will be inserted here -->
                        </aside>
                        
                        <div class="results-view__groups" id="results-container">
                            <!-- Main pro tips will be inserted here -->
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Test the pro tips rendering functions
        function renderProTipsState(message, state, query) {
            const proTips = getProTips(state, query);
            
            return `
                <div class="pro-tips-state">
                    ${message ? `
                        <div class="pro-tips-state__header">
                            <h2 class="pro-tips-state__title">${message}</h2>
                        </div>
                    ` : ''}
                    <div class="pro-tips-state__content">
                        <div class="pro-tips">
                            <h3 class="pro-tips__title">Pro Tips & Tricks</h3>
                            <div class="pro-tips__grid">
                                ${proTips.map(tip => `
                                    <div class="pro-tip">
                                        <div class="pro-tip__content">
                                            <h4 class="pro-tip__title">
                                                <span class="pro-tip__icon">${tip.icon}</span>
                                                ${tip.title}
                                            </h4>
                                            <p class="pro-tip__description">${tip.description}</p>
                                            <div class="pro-tip__examples">
                                                ${tip.examples.map(example => `
                                                    <code class="pro-tip__example">${example}</code>
                                                `).join('')}
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderFacetProTips(state) {
            const facetTips = getFacetProTips(state);
            
            return `
                <div class="facet-pro-tips">
                    <h3 class="facet-pro-tips__title">Filter & Refine</h3>
                    <div class="facet-pro-tips__list">
                        ${facetTips.map(tip => `
                            <div class="facet-pro-tip">
                                <div class="facet-pro-tip__icon">${tip.icon}</div>
                                <div class="facet-pro-tip__content">
                                    <h4 class="facet-pro-tip__title">${tip.title}</h4>
                                    <p class="facet-pro-tip__description">${tip.description}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function getProTips(state, query) {
            const tips = [];

            // Always include basic search tips
            tips.push({
                icon: 'ðŸ”',
                title: 'Basic Text Search',
                description: 'Search for any text in titles, summaries, projects, clients, and more.',
                examples: ['kitchen renovation', 'John Smith', 'Project Alpha']
            });

            // Add monetary search tips
            tips.push({
                icon: 'ðŸ’°',
                title: 'Monetary Searches',
                description: 'Find invoices, bills, and receipts by exact amounts or ranges.',
                examples: ['$1234.56', '$500-$1000', '1234.56', '1000 to 2000']
            });

            // Add range search tips
            tips.push({
                icon: 'ðŸ“Š',
                title: 'Range Queries',
                description: 'Search for amounts within specific ranges using various formats.',
                examples: ['$500-$1000', '1000 to 2000', '$50k-$100k']
            });

            // Add entity type tips
            tips.push({
                icon: 'ðŸ“‹',
                title: 'Entity Types',
                description: 'Search for specific types of records and documents.',
                examples: ['invoices', 'contracts', 'people', 'organizations']
            });

            // Add project/client tips
            tips.push({
                icon: 'ðŸ—ï¸',
                title: 'Project & Client Search',
                description: 'Find records related to specific projects or clients.',
                examples: ['Project Alpha', 'Smith Construction', 'residential']
            });

            // Add date-based tips
            tips.push({
                icon: 'ðŸ“…',
                title: 'Date-Based Search',
                description: 'Search for records by date ranges, recent activity, or time periods.',
                examples: ['recent', 'last month', '2024', 'Q1 2024']
            });

            // Add Buildertrend-specific tips
            tips.push({
                icon: 'âš¡',
                title: 'Buildertrend Navigation',
                description: 'Use trigger queries to quickly navigate to specific Buildertrend sections.',
                examples: ['schedule', 'estimates', 'change orders', 'punch list']
            });

            // Add line item tips
            tips.push({
                icon: 'ðŸ“',
                title: 'Line Item Details',
                description: 'Search within detailed line items of invoices and purchase orders.',
                examples: ['lumber', 'labor', 'materials', 'equipment']
            });

            // Add status-based tips
            tips.push({
                icon: 'ðŸ“Š',
                title: 'Status Filters',
                description: 'Find records by their current status or workflow stage.',
                examples: ['pending', 'approved', 'paid', 'overdue']
            });

            // Add advanced search tips
            tips.push({
                icon: 'ðŸŽ¯',
                title: 'Advanced Techniques',
                description: 'Combine multiple search terms and use facets to refine results.',
                examples: ['kitchen AND renovation', 'invoice AND pending', 'Smith OR Johnson']
            });

            // Customize tips based on state
            if (state === 'no-results' && query) {
                // Add troubleshooting tips for no results
                tips.unshift({
                    icon: 'ðŸ”§',
                    title: 'No Results? Try These',
                    description: 'Adjust your search strategy when no results are found.',
                    examples: [
                        'Use fewer keywords',
                        'Check spelling',
                        'Try broader terms',
                        'Use different formats'
                    ]
                });
            }

            if (state === 'idle') {
                // For idle state, emphasize getting started
                tips.unshift({
                    icon: 'ðŸš€',
                    title: 'Get Started',
                    description: 'Begin your search with any of these popular search types.',
                    examples: ['$5000', 'kitchen', 'Smith Construction', 'recent invoices']
                });
            }

            return tips;
        }

        function getFacetProTips(state) {
            const tips = [];

            if (state === 'idle') {
                tips.push({
                    icon: 'ðŸ”',
                    title: 'Search First',
                    description: 'Run a search to see filter options and refine your results.'
                });
                
                tips.push({
                    icon: 'âš¡',
                    title: 'Quick Filters',
                    description: 'Use facets to narrow down results by type, project, status, and more.'
                });
            } else {
                tips.push({
                    icon: 'ðŸ“Š',
                    title: 'Type Filters',
                    description: 'Filter by Document, Invoice, Person, Organization, or Buildertrend records.'
                });
                
                tips.push({
                    icon: 'ðŸ—ï¸',
                    title: 'Project & Client',
                    description: 'Narrow results to specific projects or clients.'
                });
                
                tips.push({
                    icon: 'ðŸ’°',
                    title: 'Amount Ranges',
                    description: 'Filter financial records by total value ranges.'
                });
                
                tips.push({
                    icon: 'ðŸ“…',
                    title: 'Date Filters',
                    description: 'Find records by issue date ranges (last week, month, year).'
                });
                
                tips.push({
                    icon: 'ðŸ“‹',
                    title: 'Status Filters',
                    description: 'Filter by record status like pending, approved, or paid.'
                });
                
                tips.push({
                    icon: 'ðŸŽ¯',
                    title: 'Advanced Grouping',
                    description: 'Group results by type, project, status, or client for better organization.'
                });
            }

            return tips;
        }

        // Test different states
        const states = [
            { name: 'Idle State', state: 'idle', query: '' },
            { name: 'Empty State', state: 'empty', query: '' },
            { name: 'No Results State', state: 'no-results', query: 'nonexistent search' }
        ];

        let currentStateIndex = 0;

        function showState(index) {
            const stateInfo = states[index];
            const summaryEl = document.getElementById('results-summary');
            const facetsContainer = document.getElementById('facets-container');
            const resultsContainer = document.getElementById('results-container');

            summaryEl.textContent = `Testing: ${stateInfo.name}`;
            
            if (stateInfo.state === 'idle') {
                resultsContainer.innerHTML = renderProTipsState('Enter at least 3 characters to see matching records.', 'idle');
            } else if (stateInfo.state === 'empty') {
                resultsContainer.innerHTML = renderProTipsState('', 'empty');
            } else {
                resultsContainer.innerHTML = renderProTipsState('No results found', 'no-results', stateInfo.query);
            }

            // Hide facets container for empty states
            if (stateInfo.state === 'idle' || stateInfo.state === 'empty' || stateInfo.state === 'no-results') {
                facetsContainer.style.display = 'none';
            } else {
                facetsContainer.style.display = '';
                facetsContainer.innerHTML = renderFacetProTips(stateInfo.state);
            }
        }

        // Add navigation buttons
        const navigation = document.createElement('div');
        navigation.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 1rem;
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
        `;

        const prevButton = document.createElement('button');
        prevButton.textContent = 'â† Previous';
        prevButton.onclick = () => {
            currentStateIndex = (currentStateIndex - 1 + states.length) % states.length;
            showState(currentStateIndex);
        };

        const nextButton = document.createElement('button');
        nextButton.textContent = 'Next â†’';
        nextButton.onclick = () => {
            currentStateIndex = (currentStateIndex + 1) % states.length;
            showState(currentStateIndex);
        };

        const stateLabel = document.createElement('div');
        stateLabel.textContent = states[currentStateIndex].name;
        stateLabel.style.margin = '0.5rem 0';
        stateLabel.style.fontWeight = 'bold';

        navigation.appendChild(prevButton);
        navigation.appendChild(document.createElement('br'));
        navigation.appendChild(nextButton);
        navigation.appendChild(stateLabel);

        document.body.appendChild(navigation);

        // Show initial state
        showState(0);

        // Update state label when changing states
        const originalShowState = showState;
        showState = function(index) {
            originalShowState(index);
            stateLabel.textContent = states[index].name;
        };
    </script>
</body>
</html>
