<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test DOM Metadata</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .result { margin: 10px 0; padding: 10px; background: #f5f5f5; }
        .metadata { font-family: monospace; color: #666; font-size: 12px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>DOM Metadata Test</h1>
    <p>This page tests that document IDs are properly added as metadata to search results.</p>
    
    <div class="test-section">
        <h2>Test Instructions</h2>
        <ol>
            <li>Open the search application</li>
            <li>Perform a search (e.g., "invoice" or "document")</li>
            <li>Check the mini results in the search dialog</li>
            <li>Check the full results in the results view</li>
            <li>Use browser dev tools to inspect elements</li>
        </ol>
    </div>
    
    <div class="test-section">
        <h2>Expected DOM Structure</h2>
        <h3>Mini Results (Search Dialog)</h3>
        <div class="result">
            <code>&lt;li class="search-dialog__item" data-document-id="document-001"&gt;</code>
        </div>
        
        <h3>Full Results (Results View)</h3>
        <div class="result">
            <code>&lt;article class="result-card" data-document-id="document-001"&gt;</code>
        </div>
    </div>
    
    <div class="test-section">
        <h2>How to Test</h2>
        <ol>
            <li>Open browser dev tools (F12)</li>
            <li>Go to Elements tab</li>
            <li>Search for elements with <code>data-document-id</code> attribute</li>
            <li>Verify the attribute contains a valid document ID from the corpus</li>
        </ol>
        
        <h3>JavaScript Console Test</h3>
        <p>Run this in the browser console to find all elements with document IDs:</p>
        <div class="result">
            <code>document.querySelectorAll('[data-document-id]')</code>
        </div>
        
        <h3>Find Specific Document</h3>
        <p>To find a specific document by ID:</p>
        <div class="result">
            <code>document.querySelector('[data-document-id="document-001"]')</code>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Sample Document IDs from Corpus</h2>
        <p>Here are some sample document IDs you can test with:</p>
        <ul>
            <li><code>document-001</code> - Riverbend Condos ‚Äì Punch List</li>
            <li><code>document-002</code> - Sunset Heights ‚Äì Specification Sheet</li>
            <li><code>clientinvoice-001</code> - Client Invoice</li>
            <li><code>purchaseorder-001</code> - Purchase Order</li>
            <li><code>bill-001</code> - Bill</li>
            <li><code>receipt-001</code> - Receipt</li>
            <li><code>payment-001</code> - Payment</li>
            <li><code>organization-001</code> - Organization</li>
            <li><code>person-001</code> - Person</li>
        </ul>
    </div>
    
    <script>
        // Auto-test function that can be run in the main app
        function testDocumentMetadata() {
            console.log('üîç Testing document metadata...');
            
            // Test mini results
            const miniResults = document.querySelectorAll('.search-dialog__item[data-document-id]');
            console.log(`üì± Found ${miniResults.length} mini results with document IDs`);
            
            // Test full results
            const fullResults = document.querySelectorAll('.result-card[data-document-id]');
            console.log(`üìÑ Found ${fullResults.length} full results with document IDs`);
            
            // Check for specific document IDs
            const testIds = ['document-001', 'clientinvoice-001', 'purchaseorder-001'];
            testIds.forEach(id => {
                const element = document.querySelector(`[data-document-id="${id}"]`);
                if (element) {
                    console.log(`‚úÖ Found element for document ID: ${id}`);
                } else {
                    console.log(`‚ùå No element found for document ID: ${id}`);
                }
            });
            
            return {
                miniResults: miniResults.length,
                fullResults: fullResults.length,
                total: miniResults.length + fullResults.length
            };
        }
        
        // Make function available globally
        window.testDocumentMetadata = testDocumentMetadata;
        
        console.log('üß™ DOM metadata test functions loaded. Run testDocumentMetadata() in the main app to test.');
    </script>
</body>
</html>
